doctype html
html(lang='en')
  head
    title How Bronze Are You?
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    link(href='stylesheets/style.css', rel='stylesheet')
    link(rel='stylesheet', href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css')
    script(src='https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js')
    script(src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js')
    script(src='javascripts/outdated.d3.js')
    script(src='javascripts/main.js')
    script.
      var pinkData = [{"label": "You", "value": #{userData.match.pinksPlaced}}, {"label": "Pro", "value": #{proData.match.pinksPlaced}}];
      var wardData = [{"label": "You", "value": #{userData.match.wardsPlaced}}, {"label": "Pro", "value": #{proData.match.wardsPlaced}}];
      var goldData = [{"label": "You", "value": #{userData.match.goldEarned}}, {"label": "Pro", "value": #{proData.match.goldEarned}}];
      $(function() {
        showHalfPiGraph(pinkData, "#pink-wards");
        showHalfPiGraph(wardData, "#green-wards");
        function getTextWidth(text, font) {
            var canvas = getTextWidth.canvas || (getTextWidth.canvas = document.createElement("canvas"));
            var context = canvas.getContext("2d");
            context.font = font;
            var metrics = context.measureText(text);
            return metrics.width;
        }
        var width = getTextWidth("#{userData.summonerInfo.name}", "bold 53px Chronic Sans");
        if (width < 225) width = 225;
        $("#bronze-thingy").css({ 'width': width + 35 + "px" });
      });
  body.comic-sans
    nav.navbar.navbar-default
      .container-fluid
        .navbar-header
          a.navbar-brand(href='#') How Bronze Are You?
        ul.nav.navbar-nav
          li
            a(href='/') Home
          li
            a(href='https://github.com/Draycia/HowBronzeAreYou') Github
        ul.nav.navbar-nav.navbar-right
          a(href='#')
            form.navbar-form.navbar-left(action='/', method='GET')
              .input-group
                input.search-query.form-control(type='text', placeholder='Search', name='summonerName')
                |     
                .input-group-btn
                  button.btn.btn-default(type='submit')
                    i.glyphicon.glyphicon-search
              select#inputRegion.form-control(name='region')
                option(selected='', value='NA1') NA
                option(value='EUW1') EUW
    .container
      .text-center
        h1#summonerName= userData.summonerInfo.name
        img#bronze-thingy(src='https://i.imgur.com/Lc8Pe9R.png', style='width: 225px;')
        br
        img#profile-icon(src='http://ddragon.leagueoflegends.com/cdn/' + version + '/img/profileicon/' + userData.summonerInfo.iconId + '.png', width='150px')
        hr
        svg#pink-wards.donut-graph
        if (userData.match.pinksPlaced < proData.match.pinksPlaced)
          p You might have an above par winrate against Shaco if you spent a little extra gold... Your pink ward count was #{userData.match.pinksPlaced} and Aphromoo's was #{proData.match.pinksPlaced}.
          br
          if (userData.match.pinksPlaced == 0)
            p You scored Bronze 5. 75g to spare your life is worth imo.
          else
            p You scored Bronze 4. I'd suggest banning stealth champs in the meantime.
        else
          p Are you even placing those correctly? Your pink ward count was #{userData.match.pinksPlaced} and Aphromoo's was #{proData.match.pinksPlaced}.
          br
          p You scored Bronze 2. Maybe you should hire someone to help with your budgeting. 
        hr
        svg#green-wards.donut-graph
        if (userData.match.wardsPlaced < proData.match.wardsPlaced)
          p No wonder you struggle against Rengar... Your ward count was #{userData.match.wardsPlaced} and Aphromoo's was #{proData.match.wardsPlaced}.
          br
          if (userData.match.wardsPlaced == 0)
            p You scored Bronze 5. Wards are free, ya know.
          else
            p You scored Bronze 4. At least you placed some wards... 
        else
          p Do bronze players even make use of sight? Your ward count was #{userData.match.wardsPlaced} and Aphromoo's was #{proData.match.wardsPlaced}.
          br
          p You scored Bronze 1. I guess your teammates are holding you back.
    footer.footer
      .container
        .text-center
          | How Bronze Are You? isn’t endorsed by Riot Games and doesn’t reflect the views or opinions of Riot Games or anyone officially involved in producing or managing League of Legends. League of Legends and Riot Games are trademarks or registered trademarks of Riot Games, Inc. League of Legends © Riot Games, Inc.